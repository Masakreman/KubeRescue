apiVersion: remediation.kuberescue.io/v1alpha1
kind: LogRemediation
metadata:
  name: db-error-remediation
  namespace: default
spec:
  sources:
  - type: deployment
    selector:
      app: db-error-remediation
  elasticsearchConfig:
    host: elasticsearch.default.svc.cluster.local
    port: 9200
    index: kubernetes-logs
  fluentbitConfig:
    bufferSize: "10MB"
    flushInterval: 1
    parser: ""
  remediationRules:
  - errorPattern: "CRITICAL_DB_CONNECTION_FAILED"
    action: restart
    cooldownPeriod: 60